<!DOCTYPE html>
<html class="light" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>SmartQueue PH - Home Screen</title>

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@100..700,0..1&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>

    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#137fec",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101922",
                    },
                    fontFamily: {
                        display: ["Manrope", "sans-serif"]
                    },
                    borderRadius: {
                        DEFAULT: "0.25rem",
                        lg: "0.5rem",
                        xl: "0.75rem",
                        full: "9999px"
                    },
                },
            },
        }
    </script>

    <style>
        body { font-family: 'Manrope', sans-serif; }
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }

        /* Modal */
        #modal-overlay {
            display: none;
            position: fixed; inset: 0; z-index: 100;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
            align-items: center; justify-content: center;
        }
        #modal-overlay.active { display: flex; }
        #modal-box { animation: popIn .25s cubic-bezier(.34,1.56,.64,1) both; }
        @keyframes popIn {
            from { opacity: 0; transform: scale(.85) translateY(20px); }
            to   { opacity: 1; transform: scale(1) translateY(0); }
        }

        /* Toast */
        #toast {
            position: fixed; bottom: 2rem; right: 2rem; z-index: 200;
            transition: opacity .3s, transform .3s;
            opacity: 0; pointer-events: none; transform: translateY(12px);
        }
        #toast.show { opacity: 1; pointer-events: auto; transform: translateY(0); }

        /* Ticket pulse */
        @keyframes ticketPulse {
            0%,100% { box-shadow: 0 0 0 0 rgba(19,127,236,.4); }
            50%      { box-shadow: 0 0 0 16px rgba(19,127,236,0); }
        }
        .ticket-pulse { animation: ticketPulse 2s infinite; }

        /* Progress bar */
        #progress-bar-inner { transition: width 1s ease; }

        /* Counter flip */
        .counter-val { transition: transform .3s ease, opacity .3s ease; }
        .counter-val.flip { transform: translateY(-8px); opacity: 0; }
    </style>
</head>

<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 min-h-screen flex flex-col">

<!-- â”€â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="toast" class="px-5 py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl shadow-2xl text-sm font-semibold flex items-center gap-3 max-w-xs">
    <span class="material-symbols-outlined text-green-400 dark:text-green-600" id="toast-icon">check_circle</span>
    <span id="toast-msg">Done!</span>
</div>

<!-- â”€â”€â”€ TICKET MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div id="modal-box" class="bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden">

        <!-- Step 1: Confirm booking -->
        <div id="step-confirm" class="p-8">
            <div class="flex items-center justify-between mb-6">
                <h2 id="modal-title" class="text-xl font-bold">Confirm Booking</h2>
                <button onclick="closeModal()" class="w-8 h-8 flex items-center justify-center rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                    <span class="material-symbols-outlined text-xl">close</span>
                </button>
            </div>
            <div class="bg-primary/5 border border-primary/20 rounded-xl p-4 mb-6">
                <p class="text-xs font-bold uppercase tracking-widest text-primary mb-1">Service Selected</p>
                <p class="text-xl font-extrabold" id="modal-service-name">Select a Service</p>
            </div>
            <div class="space-y-3 mb-6">
                <div>
                    <label class="text-xs font-bold text-slate-500 uppercase tracking-wider" for="input-name">Full Name</label>
                    <input id="input-name" type="text" placeholder="e.g. Juan dela Cruz"
                        class="mt-1 w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-primary transition"/>
                </div>
                <div>
                    <label class="text-xs font-bold text-slate-500 uppercase tracking-wider" for="input-contact">Email or Phone (optional)</label>
                    <input id="input-contact" type="text" placeholder="e.g. juan@uni.edu or 09xxxxxxxxx"
                        class="mt-1 w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-primary transition"/>
                </div>
                <div>
                    <label class="text-xs font-bold text-slate-500 uppercase tracking-wider" for="input-concern">Concern / Purpose</label>
                    <textarea id="input-concern" rows="2" placeholder="Briefly describe your concern..."
                        class="mt-1 w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-primary transition resize-none"></textarea>
                </div>
            </div>
            <button onclick="generateTicket()" class="w-full py-3.5 bg-primary text-white font-extrabold rounded-xl shadow-md shadow-primary/30 hover:bg-primary/90 active:scale-[.98] transition-all">
                Confirm &amp; Get Ticket
            </button>
        </div>

        <!-- Step 2: Ticket issued -->
        <div id="step-ticket" class="hidden p-8 text-center">
            <div class="w-16 h-16 bg-green-100 dark:bg-green-900/30 text-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
                <span class="material-symbols-outlined text-3xl">confirmation_number</span>
            </div>
            <p class="text-xs font-bold uppercase tracking-widest text-slate-400 mb-1">Your Queue Ticket</p>
            <div id="ticket-number-display"
                class="text-7xl font-black text-primary my-4 ticket-pulse rounded-2xl py-4">
                â€”
            </div>
            <p class="text-sm font-semibold text-slate-600 dark:text-slate-400 mb-1">Service: <span id="ticket-service" class="text-slate-900 dark:text-white"></span></p>
            <p class="text-sm font-semibold text-slate-600 dark:text-slate-400 mb-1">Name: <span id="ticket-name" class="text-slate-900 dark:text-white"></span></p>
            <p class="text-sm font-semibold text-slate-600 dark:text-slate-400 mb-4">Estimated Wait: <span id="ticket-wait" class="text-primary font-bold"></span></p>

            <!-- Progress tracker -->
            <div class="bg-slate-100 dark:bg-slate-800 rounded-full h-2 mb-2 overflow-hidden">
                <div id="progress-bar-inner" class="h-full bg-primary rounded-full" style="width:0%"></div>
            </div>
            <p class="text-xs text-slate-400 mb-6"><span id="progress-label">Waitingâ€¦</span></p>

            <div class="flex gap-3">
                <button onclick="copyTicket()" class="flex-1 py-2.5 border border-slate-200 dark:border-slate-700 rounded-xl text-sm font-bold hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors flex items-center justify-center gap-2">
                    <span class="material-symbols-outlined text-base">content_copy</span> Copy
                </button>
                <button onclick="closeModal()" class="flex-1 py-2.5 bg-primary text-white rounded-xl text-sm font-bold hover:bg-primary/90 transition-colors">
                    Done
                </button>
            </div>
            <button onclick="cancelTicket()" class="mt-3 w-full py-2 text-xs text-red-400 hover:text-red-500 font-semibold transition-colors">
                Cancel my ticket
            </button>
        </div>
    </div>
</div>

<!-- â”€â”€â”€ TOP NAV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<header class="sticky top-0 z-50 bg-white/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800">
    <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
        <div class="flex items-center gap-3">
            <div class="bg-primary text-white p-1.5 rounded-lg flex items-center justify-center">
                <span class="material-symbols-outlined text-2xl">confirmation_number</span>
            </div>
            <h1 class="text-xl font-extrabold tracking-tight text-primary">SmartQueue PH</h1>
        </div>

        <div class="flex items-center gap-4">
            <!-- Active ticket badge (hidden by default) -->
            <button id="nav-ticket-btn" onclick="viewMyTicket()" class="hidden items-center gap-2 px-4 py-2 bg-primary/10 text-primary rounded-lg text-sm font-bold hover:bg-primary/20 transition-colors">
                <span class="material-symbols-outlined text-base">confirmation_number</span>
                <span id="nav-ticket-label">My Ticket</span>
            </button>
        
        </div>
    </div>
</header>

<main class="flex-grow max-w-7xl mx-auto w-full px-6 py-10">

    <!-- â”€â”€â”€ LIVE STATUS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <section class="mb-12">
        <div class="flex flex-col md:flex-row md:items-end justify-between gap-6 mb-8">
            <div class="max-w-2xl">
                <h2 class="text-4xl font-black text-slate-900 dark:text-white mb-3">Live Queue Status</h2>
                <p class="text-slate-500 dark:text-slate-400 text-lg">Real-time update for campus service departments. View current progress and plan your visit.</p>
            </div>
            <div class="flex items-center gap-2 px-4 py-2 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 rounded-full text-sm font-bold border border-green-100 dark:border-green-800">
                <span class="relative flex h-2 w-2">
                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                </span>
                System Online
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Now Serving -->
            <div class="bg-white dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col items-center justify-center text-center group hover:border-primary/50 transition-colors col-span-1">
                <span class="text-sm font-bold uppercase tracking-widest text-slate-400 mb-2">Now Serving</span>
                <p class="counter-val text-5xl font-black mb-2 text-slate-700 dark:text-slate-200" id="now-serving-display">â€”</p>
                <p class="text-sm font-semibold text-slate-500 dark:text-slate-400" id="now-serving-service">No active service</p>
                <div class="mt-4 w-12 h-1 bg-primary/20 rounded-full group-hover:w-24 transition-all"></div>
            </div>

            <!-- Waiting Time -->
            <div class="bg-white dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col items-center justify-center text-center group hover:border-primary/50 transition-colors">
                <span class="text-sm font-bold uppercase tracking-widest text-slate-400 mb-2">Wait Duration</span>
                <p class="text-primary text-5xl font-black mb-2"><span id="wait-mins" class="counter-val">0</span> <span class="text-2xl font-bold">mins</span></p>
                <p class="text-lg font-semibold text-slate-600 dark:text-slate-400">Estimated Waiting Time</p>
                <div class="mt-4 w-12 h-1 bg-primary/20 rounded-full group-hover:w-24 transition-all"></div>
            </div>

            <!-- Queue Depth -->
            <div class="bg-white dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col items-center justify-center text-center group hover:border-primary/50 transition-colors">
                <span class="text-sm font-bold uppercase tracking-widest text-slate-400 mb-2">In Queue</span>
                <p class="text-slate-700 dark:text-slate-200 text-5xl font-black mb-2"><span id="queue-depth" class="counter-val">0</span></p>
                <p class="text-lg font-semibold text-slate-600 dark:text-slate-400">People Waiting</p>
                <div class="mt-4 w-12 h-1 bg-primary/20 rounded-full group-hover:w-24 transition-all"></div>
            </div>
        </div>

        <!-- Per-service breakdown -->
        <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 px-5 py-4 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined text-primary">school</span>
                    <span class="font-bold text-sm">Admissions</span>
                </div>
                <span class="text-sm font-black text-primary"><span id="count-adv">0</span> waiting</span>
            </div>
            <div class="bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 px-5 py-4 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined text-primary">assignment_ind</span>
                    <span class="font-bold text-sm">Registrar</span>
                </div>
                <span class="text-sm font-black text-primary"><span id="count-enr">0</span> waiting</span>
            </div>
            <div class="bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 px-5 py-4 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined text-primary">payments</span>
                    <span class="font-bold text-sm">Treasury</span>
                </div>
                <span class="text-sm font-black text-primary"><span id="count-pay">0</span> waiting</span>
            </div>
        </div>
    </section>

    <!-- â”€â”€â”€ BOOKING SECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <section class="bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-lg overflow-hidden">
        <div class="p-8 border-b border-slate-100 dark:border-slate-800">
            <h3 class="text-2xl font-bold text-slate-900 dark:text-white mb-2">Book Queue / Appointment</h3>
            <p class="text-slate-500 dark:text-slate-400">Select a service category to secure your slot or schedule a consultation.</p>
        </div>
        <div class="p-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
                <!-- Advising -->
                <label class="relative cursor-pointer group">
                    <input checked class="peer sr-only" name="service" type="radio" value="Admissions"/>
                    <div class="h-full p-6 rounded-xl border-2 border-slate-100 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/50 transition-all peer-checked:border-primary peer-checked:bg-primary/5 peer-checked:ring-4 peer-checked:ring-primary/10">
                        <div class="w-12 h-12 bg-white dark:bg-slate-700 rounded-lg shadow-sm flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                            <span class="material-symbols-outlined text-primary text-2xl">school</span>
                        </div>
                        <h4 class="text-lg font-bold mb-1">Admissions</h4>
                        <p class="text-sm text-slate-500 dark:text-slate-400">Academic consulting, course planning support, program requirement guidance, and career pathway advising.</p>
                    </div>
                </label>

                <!-- Enrollment -->
                <label class="relative cursor-pointer group">
                    <input class="peer sr-only" name="service" type="radio" value="Registrar"/>
                    <div class="h-full p-6 rounded-xl border-2 border-slate-100 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/50 transition-all peer-checked:border-primary peer-checked:bg-primary/5 peer-checked:ring-4 peer-checked:ring-primary/10">
                        <div class="w-12 h-12 bg-white dark:bg-slate-700 rounded-lg shadow-sm flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                            <span class="material-symbols-outlined text-primary text-2xl">assignment_ind</span>
                        </div>
                        <h4 class="text-lg font-bold mb-1">Registrar</h4>
                        <p class="text-sm text-slate-500 dark:text-slate-400">Student registration, enrollment, subject adjustments, credit transfer evaluation, and maintenance of academic records including grades and transcripts.</p>
                    </div>
                </label>

                <!-- Payment -->
                <label class="relative cursor-pointer group">
                    <input class="peer sr-only" name="service" type="radio" value="Treasury"/>
                    <div class="h-full p-6 rounded-xl border-2 border-slate-100 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/50 transition-all peer-checked:border-primary peer-checked:bg-primary/5 peer-checked:ring-4 peer-checked:ring-primary/10">
                        <div class="w-12 h-12 bg-white dark:bg-slate-700 rounded-lg shadow-sm flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                            <span class="material-symbols-outlined text-primary text-2xl">payments</span>
                        </div>
                        <h4 class="text-lg font-bold mb-1">Treasury</h4>
                        <p class="text-sm text-slate-500 dark:text-slate-400">Tuition and miscellaneous fee payments, scholarship processing, and financial transaction services.</p>
                    </div>
                </label>
            </div>

            <div class="flex flex-col items-center gap-6">
                <button onclick="openBookingModal()" class="w-full md:w-auto min-w-[300px] py-4 bg-primary text-white text-lg font-extrabold rounded-xl shadow-lg shadow-primary/30 hover:bg-primary/90 hover:-translate-y-1 transition-all active:translate-y-0">
                    Book Queue Number
                </button>
                <p class="text-xs text-slate-400 dark:text-slate-500 text-center flex items-center gap-2">
                    <span class="material-symbols-outlined text-sm">info</span>
                    By booking, you agree to receive SMS/Email notifications regarding your status.
                </p>
            </div>
        </div>
    </section>

    <!-- â”€â”€â”€ INFO CARDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <section class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="relative overflow-hidden rounded-2xl aspect-[16/7] group">
            <div class="absolute inset-0 bg-primary/10 z-0"></div>
            <div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent z-10"></div>
            <img class="absolute inset-0 w-full h-full object-cover group-hover:scale-110 transition-transform duration-700" src="https://lh3.googleusercontent.com/aida-public/AB6AXuBSQ6ftQfs0uAwhAleXL4cC_GQ3woVn5weNzfdYMmeLauqcyyFO7_a36y-A4ln-ET8NKMqgPwr8d0M8zRJYHh7MjXpwjybc58Sa4FPbl3xbBLFml3Lb4Spnv3y6PNE1gGjh4_LrqL32gVdpn39Q6bzp-MV6kyUxnSWAuLgd4AXlX0XyOXmk2Hb5DZZJ6Ov_3Pgdnl_jzIltFr3M30Mz-IMZKiwzq_f87adCi3zlIHayES9DMsO2BRDPOuYdZZEWgAMKQCUlu3kwS2g" alt="University building"/>
            <div class="absolute bottom-6 left-6 z-20">
                <h5 class="text-white text-xl font-bold">New Student Guide</h5>
                <p class="text-white/80 text-sm">Read the 2026 Enrollment Handbook</p>
            </div>
        </div>

        <div class="relative overflow-hidden rounded-2xl aspect-[16/7] group">
            <div class="absolute inset-0 bg-primary/10 z-0"></div>
            <div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent z-10"></div>
            <img class="absolute inset-0 w-full h-full object-cover group-hover:scale-110 transition-transform duration-700" src="https://lh3.googleusercontent.com/aida-public/AB6AXuC3_gCAt-TJUA0bYrjvsuR77JuBdfki0tuj8w3M1dJILyw2NPnVordvGqfsBr7ZCpJvAeOm6QIPAq4mcgS1BMsZ_8MWyteGu7jlEkaVEBTVXkoRQdC4Vx7T6uj6RUTyKNjGshSEj8ElT7IP79soI-H_EVfVDvoWbS-DwD7cvhip9dB_09g2oImwg1Yaa_uztLtWGLfe9x71qKAhNDgwAzBN0AOg22BrCEzHAzu7MbT6_xSk6Ts5nDnqTpOO1nrKVJZCeQeYqPNTnoA" alt="Student studying"/>
            <div class="absolute bottom-6 left-6 z-20">
                <h5 class="text-white text-xl font-bold">Financial Assistance</h5>
                <p class="text-white/80 text-sm">Explore payment plans and scholarships</p>
            </div>
        </div>
    </section>
</main>

<!-- â”€â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<footer class="bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800 py-12">
    <div class="max-w-7xl mx-auto px-6">
        <div class="flex flex-col md:flex-row justify-between items-center gap-8 mb-8">
            <div class="flex items-center gap-3">
                <div class="bg-primary/10 text-primary p-1 rounded flex items-center justify-center">
                    <span class="material-symbols-outlined text-xl">confirmation_number</span>
                </div>
                <span class="text-lg font-bold text-slate-900 dark:text-white">SmartQueue PH</span>
            </div>
            <div class="flex gap-8">
                <a class="text-sm text-slate-500 dark:text-slate-400 hover:text-primary transition-colors" href="#">Privacy Policy</a>
                <a class="text-sm text-slate-500 dark:text-slate-400 hover:text-primary transition-colors" href="#">Terms of Service</a>
                <a class="text-sm text-slate-500 dark:text-slate-400 hover:text-primary transition-colors" href="#">Contact Us</a>
            </div>
            <div class="flex gap-4">
                <a class="w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-primary hover:text-white transition-all" href="#">
                    <span class="material-symbols-outlined text-lg">public</span>
                </a>
                <a class="w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-primary hover:text-white transition-all" href="#">
                    <span class="material-symbols-outlined text-lg">mail</span>
                </a>
            </div>
        </div>
        <div class="pt-8 border-t border-slate-100 dark:border-slate-800 text-center">
            <p class="text-sm text-slate-400 dark:text-slate-500 font-medium">SmartQueue PH Â© 2026. Streamlining your campus experience with efficiency.</p>
        </div>
    </div>
</footer>

<!-- â”€â”€â”€ JAVASCRIPT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SHARED localStorage LAYER
// Key: 'smartqueue_db'
// Schema: { tickets: [], counters: {}, nowServing: null }
// Both pages read/write this key and listen for 'storage' events
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const DB_KEY = 'smartqueue_db';
const MINS_PER_PERSON = 5;
const PREFIX = { Admissions:'A', Registrar:'R', Treasury:'T' };

function dbRead() {
    try {
        const raw = localStorage.getItem(DB_KEY);
        if (raw) return JSON.parse(raw);
    } catch(e) {}
    return { tickets: [], counters: { Advising:0, Enrollment:0, Payment:0 }, nowServing: null };
}

function dbWrite(data) {
    localStorage.setItem(DB_KEY, JSON.stringify(data));
}

function dbInit() {
    if (!localStorage.getItem(DB_KEY)) dbWrite({ tickets: [], counters: { Admissions:0, Registrar:0, Treasury:0 }, nowServing: null });
}

// â”€â”€ local session state (not shared) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let myTicketNumber = null;   // only this browser's ticket
let progressInterval = null;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showToast(msg, icon = 'check_circle') {
    const t = document.getElementById('toast');
    document.getElementById('toast-msg').textContent = msg;
    document.getElementById('toast-icon').textContent = icon;
    t.classList.add('show');
    clearTimeout(t._t);
    t._t = setTimeout(() => t.classList.remove('show'), 3000);
}

function flipCounter(el, newVal) {
    if (el.textContent === String(newVal)) return;
    el.classList.add('flip');
    setTimeout(() => { el.textContent = newVal; el.classList.remove('flip'); }, 300);
}

function getSelectedService() {
    const checked = document.querySelector('input[name="service"]:checked');
    return checked ? checked.value : '';
}


function getWaiting(db, service) {
    return db.tickets.filter(t => t.service === service && t.status === 'waiting').length;
}

function getTotalWaiting(db) {
    return db.tickets.filter(t => t.status === 'waiting').length;
}

function getMyPosition(db) {
    if (!myTicketNumber) return null;
    const mine = db.tickets.find(t => t.number === myTicketNumber);
    if (!mine || mine.status !== 'waiting') return 0;
    const ahead = db.tickets.filter(t => t.service === mine.service && t.status === 'waiting'
        && new Date(t.issuedAt) <= new Date(mine.issuedAt) && t.number !== mine.number).length;
    return ahead + 1;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// UI UPDATES â€” reads from shared DB
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateDashboard() {
    const db = dbRead();

    // Now serving
    const ns = db.nowServing;
    const nowEl = document.getElementById('now-serving-display');
    const svcEl = document.getElementById('now-serving-service');
    flipCounter(nowEl, ns ? ns.number : 'â€”');
    svcEl.textContent = ns ? ns.service : 'No active service';

    // Wait time & depth
    const waiting = getTotalWaiting(db);
    flipCounter(document.getElementById('wait-mins'), waiting * MINS_PER_PERSON);
    flipCounter(document.getElementById('queue-depth'), waiting);

    // Per-service counts
    document.getElementById('count-adv').textContent = getWaiting(db, 'Admissions');
    document.getElementById('count-enr').textContent = getWaiting(db, 'Registrar');
    document.getElementById('count-pay').textContent = getWaiting(db, 'Treasury');

    // Nav ticket badge
    const navBtn = document.getElementById('nav-ticket-btn');
    if (myTicketNumber) {
        navBtn.classList.remove('hidden');
        navBtn.classList.add('flex');
        document.getElementById('nav-ticket-label').textContent = myTicketNumber;
    } else {
        navBtn.classList.add('hidden');
        navBtn.classList.remove('flex');
    }

    // Check if MY ticket was called by admin
    if (myTicketNumber) {
        const mine = db.tickets.find(t => t.number === myTicketNumber);
        if (mine && mine.status === 'serving') {
            document.getElementById('progress-bar-inner').style.width = '100%';
            document.getElementById('progress-label').textContent = 'âœ“ Your turn! Please proceed to the counter.';
            document.getElementById('ticket-wait').textContent = 'Now!';
            showToast(`ðŸ”” ${myTicketNumber} â€” It's your turn! Please proceed.`, 'notifications_active');
        } else if (mine && mine.status === 'done') {
            document.getElementById('progress-bar-inner').style.width = '100%';
            document.getElementById('progress-label').textContent = 'âœ“ Ticket completed. Thank you!';
            myTicketNumber = null;
            updateDashboard();
        }
    }
}

function updateTicketProgress() {
    if (!myTicketNumber) return;
    const db = dbRead();
    const pos = getMyPosition(db);
    const mine = db.tickets.find(t => t.number === myTicketNumber);
    if (!mine) return;

    if (mine.status === 'serving') {
        document.getElementById('progress-bar-inner').style.width = '100%';
        document.getElementById('progress-label').textContent = 'âœ“ Your turn! Please proceed to the counter.';
        document.getElementById('ticket-wait').textContent = 'Now!';
        clearInterval(progressInterval);
        return;
    }
    if (mine.status === 'done' || mine.status === 'skipped') {
        document.getElementById('progress-bar-inner').style.width = '100%';
        document.getElementById('progress-label').textContent = mine.status === 'done' ? 'âœ“ Ticket completed. Thank you!' : 'âš  Your ticket was skipped. Please re-queue.';
        clearInterval(progressInterval);
        return;
    }
    if (!pos) return;

    const total = db.counters[mine.service];
    const pct = total > 0 ? Math.round(((total - pos) / total) * 100) : 0;
    document.getElementById('progress-bar-inner').style.width = pct + '%';
    document.getElementById('progress-label').textContent = `You are #${pos} in line â€” ~${pos * MINS_PER_PERSON} mins remaining`;
    document.getElementById('ticket-wait').textContent = `~${pos * MINS_PER_PERSON} mins`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MODAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openBookingModal() {
    const service = getSelectedService();
    document.getElementById('modal-service-name').textContent = service;
    document.getElementById('step-confirm').classList.remove('hidden');
    document.getElementById('step-ticket').classList.add('hidden');
    document.getElementById('input-name').value = '';
    document.getElementById('input-contact').value = '';
    document.getElementById('input-concern').value = '';
    document.getElementById('modal-overlay').classList.add('active');
}

function closeModal() {
    document.getElementById('modal-overlay').classList.remove('active');
    clearInterval(progressInterval);
}

function viewMyTicket() {
    if (!myTicketNumber) return;
    const db = dbRead();
    const mine = db.tickets.find(t => t.number === myTicketNumber);
    if (!mine) return;
    document.getElementById('step-confirm').classList.add('hidden');
    document.getElementById('step-ticket').classList.remove('hidden');
    document.getElementById('ticket-number-display').textContent = mine.number;
    document.getElementById('ticket-service').textContent = mine.service;
    document.getElementById('ticket-name').textContent = mine.name || 'Guest';
    document.getElementById('modal-overlay').classList.add('active');
    startProgressTracking();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BOOKING â€” writes to shared DB
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function generateTicket() {
    const name    = document.getElementById('input-name').value.trim();
    const contact = document.getElementById('input-contact').value.trim();
    const concern = document.getElementById('input-concern').value.trim();
    const service = document.getElementById('modal-service-name').textContent;

    if (!name) {
        document.getElementById('input-name').focus();
        showToast('Please enter your name.', 'warning');
        return;
    }

    // Write to shared DB
    const db = dbRead();
    db.counters[service]++;
    const ticketNum = PREFIX[service] + String(db.counters[service]).padStart(3, '0');
    db.tickets.push({
        id: Date.now() + Math.random(),
        number: ticketNum,
        name, service, concern, contact,
        status: 'waiting',
        issuedAt: new Date().toISOString(),
        calledAt: null,
    });
    dbWrite(db);

    myTicketNumber = ticketNum;

    // Show ticket step
    document.getElementById('step-confirm').classList.add('hidden');
    document.getElementById('step-ticket').classList.remove('hidden');
    document.getElementById('ticket-number-display').textContent = ticketNum;
    document.getElementById('ticket-service').textContent = service;
    document.getElementById('ticket-name').textContent = name;
    document.getElementById('progress-bar-inner').style.width = '0%';

    updateDashboard();
    updateTicketProgress();
    startProgressTracking();

    if (contact) setTimeout(() => showToast(`Notification sent to ${contact}`, 'notifications'), 1200);
    showToast(`Ticket ${ticketNum} confirmed!`);
}

function cancelTicket() {
    if (!myTicketNumber) return;
    const db = dbRead();
    const idx = db.tickets.findIndex(t => t.number === myTicketNumber);
    if (idx !== -1) db.tickets.splice(idx, 1);
    dbWrite(db);
    myTicketNumber = null;
    clearInterval(progressInterval);
    closeModal();
    updateDashboard();
    showToast('Ticket cancelled.', 'cancel');
}

function copyTicket() {
    if (!myTicketNumber) return;
    const db = dbRead();
    const mine = db.tickets.find(t => t.number === myTicketNumber);
    if (!mine) return;
    const text = `SmartQueue PH Ticket\nNumber: ${mine.number}\nService: ${mine.service}\nName: ${mine.name}`;
    navigator.clipboard.writeText(text).then(() => showToast('Ticket details copied!'));
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PROGRESS TRACKING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function startProgressTracking() {
    clearInterval(progressInterval);
    updateTicketProgress();
    progressInterval = setInterval(updateTicketProgress, 3000);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LISTEN FOR CHANGES FROM ADMIN (other tab)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
window.addEventListener('storage', e => {
    if (e.key === DB_KEY) {
        updateDashboard();
        updateTicketProgress();
    }
});

// Poll every 3s as fallback (same tab edge cases)
setInterval(() => { updateDashboard(); updateTicketProgress(); }, 3000);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// KEYBOARD + INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });
document.getElementById('modal-overlay').addEventListener('click', function(e) { if (e.target === this) closeModal(); });

dbInit();
updateDashboard();
</script>
</body>
</html>
